<!doctype html><html lang=en><head><title>redux-devtools.md :: Vim Emacser Personal Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Redux DevTools Features Lets you inspect every state and action payload Lets you go back in time by “cancelling” actions If you change the reducer code, each “staged” action will be re-evaluated If the reducers throw, you will see during which action this happened, and what the error was With persistState() store enhancer, you can persist debug sessions across page reloads Overview Redux DevTools is a development time package that provides power-ups for your Redux development workflow."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/nodejs/redux-devtools/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content="https://twitter.com/linuxing3"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="redux-devtools.md"><meta property="og:description" content="Redux DevTools Features Lets you inspect every state and action payload Lets you go back in time by “cancelling” actions If you change the reducer code, each “staged” action will be re-evaluated If the reducers throw, you will see during which action this happened, and what the error was With persistState() store enhancer, you can persist debug sessions across page reloads Overview Redux DevTools is a development time package that provides power-ups for your Redux development workflow."><meta property="og:url" content="/posts/nodejs/redux-devtools/"><meta property="og:site_name" content="Vim Emacser Personal Blog"><meta property="og:image" content="/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2018-02-16 14:05:34 -0400 -0400"></head><body class=green><div class="container full"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Terminal</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ▾</li></ul><ul class="language-selector__more hidden"><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><hr><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/nodejs/redux-devtools/>redux-devtools.md</a></h1><div class=post-meta><span class=post-date>2018-02-16</span></div><div class=post-content><div><h1 id=redux-devtools>Redux DevTools<a href=#redux-devtools class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=features>Features<a href=#features class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>Lets you inspect every state and action payload</li><li>Lets you go back in time by “cancelling” actions</li><li>If you change the reducer code, each “staged” action will be re-evaluated</li><li>If the reducers throw, you will see during which action this happened, and what the error was</li><li>With <code>persistState()</code> store enhancer, you can persist debug sessions across page reloads</li></ul><h3 id=overview>Overview<a href=#overview class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Redux DevTools is a development time package that provides power-ups for your Redux development workflow. Be careful to strip its code in production! To use Redux DevTools, you need to choose a “monitor”—a React component that will serve as a UI for the DevTools. Different tasks and workflows require different UIs, so Redux DevTools is built to be flexible in this regard. We recommend using <a href=https://github.com/gaearon/redux-devtools-log-monitor><code>LogMonitor</code></a> for inspecting the state and time travel, and wrap it in a <a href=https://github.com/gaearon/redux-devtools-dock-monitor><code>DockMonitor</code></a> to quickly move it across the screen. That said, when you’re comfortable rolling up your own setup, feel free to do this, and share it with us.</p><h3 id=installation>Installation<a href=#installation class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>npm install --save-dev redux-devtools
</code></pre><p>You’ll also likely want to install some monitors:</p><pre tabindex=0><code>npm install --save-dev redux-devtools-log-monitor
npm install --save-dev redux-devtools-dock-monitor
</code></pre><h3 id=usage>Usage<a href=#usage class=hanchor arialabel=Anchor>&#8983;</a></h3><h4 id=create-a-devtools-component>Create a <code>DevTools</code> Component<a href=#create-a-devtools-component class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Somewhere in your project, create a <code>DevTools</code> component by passing a <code>monitor</code> element to <code>createDevTools</code>. In the following example our <code>monitor</code> consists of <a href=https://github.com/gaearon/redux-devtools-log-monitor><code>LogMonitor</code></a> docked within <a href=https://github.com/gaearon/redux-devtools-dock-monitor><code>DockMonitor</code></a>:</p><h5 id=containersdevtoolsjs><code>containers/DevTools.js</code><a href=#containersdevtoolsjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Exported from redux-devtools
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createDevTools</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-devtools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Monitors are separate packages, and you can make a custom one
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LogMonitor</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-devtools-log-monitor&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DockMonitor</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-devtools-dock-monitor&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// createDevTools takes a monitor and produces a DevTools component
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createDevTools</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Monitors are individually adjustable with props.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// Consult their repositories to learn about those props.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// Here, we put LogMonitor inside a DockMonitor.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>DockMonitor</span> <span style=color:#a6e22e>toggleVisibilityKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ctrl-h&#39;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>changePositionKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ctrl-q&#39;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>LogMonitor</span> <span style=color:#a6e22e>theme</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tomorrow&#39;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/DockMonitor&gt;</span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>DevTools</span>;
</span></span></code></pre></div><p>Note that you can use <code>LogMonitor</code> directly without wrapping it in <code>DockMonitor</code> if you’d like to display the DevTools UI somewhere right inside your application:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// If you&#39;d rather not use docking UI, use &lt;LogMonitor&gt; directly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createDevTools</span>(
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>LogMonitor</span> <span style=color:#a6e22e>theme</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;solarized&#39;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h4 id=use-devtoolsinstrument-store-enhancer>Use <code>DevTools.instrument()</code> Store Enhancer<a href=#use-devtoolsinstrument-store-enhancer class=hanchor arialabel=Anchor>&#8983;</a></h4><p>The <code>DevTools</code> component you created with <code>createDevTools()</code> has a special static method called <code>instrument()</code>. It returns a <a href=http://rackt.github.io/redux/docs/Glossary.html#store-enhancer>store enhancer</a> that you need to use in development.</p><p>A store enhancer is a function that takes <code>createStore</code> and returns an enhanced version of it that you will use instead. You probably already used another store enhancer—<a href=http://redux.js.org/docs/api/applyMiddleware.html><code>applyMiddleware()</code></a>. Unlike <code>applyMiddleware()</code>, you will need to be careful to only use <code>DevTools.instrument()</code> in development environment, and never in production.</p><p>The easiest way to apply several store enhancers in a row is to use the <a href=http://redux.js.org/docs/api/compose.html><code>compose()</code></a> utility function that ships with Redux. It is the same <code>compose()</code> that you can find in Underscore and Lodash. In our case, we would use it to compose several store enhancers into one: <code>compose(applyMiddleware(m1, m2, m3), DevTools.instrument())</code>.</p><p>It’s important that you should add <code>DevTools.instrument()</code> <em>after</em> <code>applyMiddleware</code> in your <code>compose()</code> function arguments. This is because <code>applyMiddleware</code> is potentially asynchronous, but <code>DevTools.instrument()</code> expects all actions to be plain objects rather than actions interpreted by asynchronous middleware such as <a href=https://github.com/acdlite/redux-promise>redux-promise</a> or <a href=https://github.com/gaearon/redux-thunk>redux-thunk</a>. So make sure <code>applyMiddleware()</code> goes first in the <code>compose()</code> call, and <code>DevTools.instrument()</code> goes after it.</p><h5 id=storeconfigurestorejs><code>store/configureStore.js</code><a href=#storeconfigurestorejs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createStore</span>, <span style=color:#a6e22e>applyMiddleware</span>, <span style=color:#a6e22e>compose</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>rootReducer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../reducers&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../containers/DevTools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>finalCreateStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compose</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Middleware you want to use in development:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>applyMiddleware</span>(<span style=color:#a6e22e>d1</span>, <span style=color:#a6e22e>d2</span>, <span style=color:#a6e22e>d3</span>),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Required! Enable Redux DevTools with the monitors you chose
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>DevTools</span>.<span style=color:#a6e22e>instrument</span>()
</span></span><span style=display:flex><span>)(<span style=color:#a6e22e>createStore</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>configureStore</span>(<span style=color:#a6e22e>initialState</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>finalCreateStore</span>(<span style=color:#a6e22e>rootReducer</span>, <span style=color:#a6e22e>initialState</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Hot reload reducers (requires Webpack or Browserify HMR to be enabled)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>hot</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>hot</span>.<span style=color:#a6e22e>accept</span>(<span style=color:#e6db74>&#39;../reducers&#39;</span>, () =&gt;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>replaceReducer</span>(<span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;../reducers&#39;</span>)<span style=color:#75715e>/*.default if you use Babel 6+ */</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>store</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If you’d like, you may add another store enhancer called <code>persistState()</code>. It ships with this package, and it lets you serialize whole sessions (including all dispatched actions and the state of the monitors) by a URL key. So if you visit <code>http://localhost:3000/?debug_session=reproducing_weird_bug</code>, do something in the app, then open <code>http://localhost:3000/?debug_session=some_other_feature</code>, and then go back to <code>http://localhost:3000/?debug_session=reproducing_weird_bug</code>, the state will be restored. The implementation of <code>persistState()</code> is fairly naïve but you can take it as an inspiration and build a proper UI for it if you feel like it!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>persistState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-devtools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>finalCreateStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compose</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Middleware you want to use in development:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>applyMiddleware</span>(<span style=color:#a6e22e>d1</span>, <span style=color:#a6e22e>d2</span>, <span style=color:#a6e22e>d3</span>),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Required! Enable Redux DevTools with the monitors you chose
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>DevTools</span>.<span style=color:#a6e22e>instrument</span>(),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Optional. Lets you write ?debug_session=&lt;key&gt; in address bar to persist debug sessions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>persistState</span>(<span style=color:#a6e22e>getDebugSessionKey</span>())
</span></span><span style=display:flex><span>)(<span style=color:#a6e22e>createStore</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getDebugSessionKey</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// You can write custom logic here!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// By default we try to read the key from ?debug_session=&lt;key&gt; in the address bar
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>matches</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span>.<span style=color:#a6e22e>match</span>(<span style=color:#e6db74>/[?&amp;]debug_session=([^&amp;]+)\b/</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>matches</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>matches</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>)<span style=color:#f92672>?</span> <span style=color:#a6e22e>matches</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>configureStore</span>(<span style=color:#a6e22e>initialState</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=exclude-devtools-from-production-builds>Exclude DevTools from Production Builds<a href=#exclude-devtools-from-production-builds class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Finally, to make sure we’re not pulling any DevTools-related code in the production builds, we will envify our code. With Webpack, you can use <code>DefinePlugin</code> (Browserify equivalent is called <a href=https://github.com/zertosh/loose-envify><code>envify</code></a>) to turn magic constants like <code>process.env.NODE_ENV</code> into <code>'production'</code> or <code>'development'</code> strings depending on the environment, and import and render <code>redux-devtools</code> conditionally when <code>process.env.NODE_ENV</code> is not <code>'production'</code>. Then, if you have an Uglify step before production, Uglify will eliminate dead <code>if (false)</code> branches with <code>redux-devtools</code> imports.</p><p>If you are using ES6 modules with Webpack 1.x and Babel, you might try putting your <code>import</code> statement inside an <code>if (process.env.NODE_ENV !== 'production)</code> to exclude the DevTools package from your production bundle. However this ES6 specification forbids it, so this won’t compile. Instead, you can use a conditional CommonJS <code>require</code>. Babel will let it compile, and Uglify will eliminate the dead branches before Webpack creates a bundle. This is why we recommend creating a <code>configureStore.js</code> file that either directs you to <code>configureStore.dev.js</code> or <code>configureStore.prod.js</code> depending on the configuration. While it is a little bit more maintenance, the upside is that you can be sure you won’t pull any development dependencies into the production builds, and that you can easily enable different middleware (e.g. crash reporting, logging) in the production environment.</p><h5 id=storeconfigurestorejs-1><code>store/configureStore.js</code><a href=#storeconfigurestorejs-1 class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Use ProvidePlugin (Webpack) or loose-envify (Browserify)
</span></span></span><span style=display:flex><span><span style=color:#75715e>// together with Uglify to strip the dev branch in prod build.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>NODE_ENV</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;production&#39;</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./configureStore.prod&#39;</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./configureStore.dev&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=storeconfigurestoreprodjs><code>store/configureStore.prod.js</code><a href=#storeconfigurestoreprodjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createStore</span>, <span style=color:#a6e22e>applyMiddleware</span>, <span style=color:#a6e22e>compose</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>rootReducer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../reducers&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>finalCreateStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compose</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Middleware you want to use in production:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>applyMiddleware</span>(<span style=color:#a6e22e>p1</span>, <span style=color:#a6e22e>p2</span>, <span style=color:#a6e22e>p3</span>),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Other store enhancers if you use any
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>)(<span style=color:#a6e22e>createStore</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>configureStore</span>(<span style=color:#a6e22e>initialState</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>finalCreateStore</span>(<span style=color:#a6e22e>rootReducer</span>, <span style=color:#a6e22e>initialState</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h5 id=storeconfigurestoredevjs><code>store/configureStore.dev.js</code><a href=#storeconfigurestoredevjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createStore</span>, <span style=color:#a6e22e>applyMiddleware</span>, <span style=color:#a6e22e>compose</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>persistState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-devtools&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>rootReducer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../reducers&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../containers/DevTools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>finalCreateStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compose</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Middleware you want to use in development:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>applyMiddleware</span>(<span style=color:#a6e22e>d1</span>, <span style=color:#a6e22e>d2</span>, <span style=color:#a6e22e>d3</span>),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Required! Enable Redux DevTools with the monitors you chose
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>DevTools</span>.<span style=color:#a6e22e>instrument</span>(),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Optional. Lets you write ?debug_session=&lt;key&gt; in address bar to persist debug sessions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>persistState</span>(<span style=color:#a6e22e>getDebugSessionKey</span>())
</span></span><span style=display:flex><span>)(<span style=color:#a6e22e>createStore</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getDebugSessionKey</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// You can write custom logic here!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// By default we try to read the key from ?debug_session=&lt;key&gt; in the address bar
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>matches</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span>.<span style=color:#a6e22e>match</span>(<span style=color:#e6db74>/[?&amp;]debug_session=([^&amp;]+)\b/</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>matches</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>matches</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>)<span style=color:#f92672>?</span> <span style=color:#a6e22e>matches</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>configureStore</span>(<span style=color:#a6e22e>initialState</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>finalCreateStore</span>(<span style=color:#a6e22e>rootReducer</span>, <span style=color:#a6e22e>initialState</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Hot reload reducers (requires Webpack or Browserify HMR to be enabled)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>hot</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>hot</span>.<span style=color:#a6e22e>accept</span>(<span style=color:#e6db74>&#39;../reducers&#39;</span>, () =&gt;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>replaceReducer</span>(<span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;../reducers&#39;</span>)<span style=color:#75715e>/*.default if you use Babel 6+ */</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>store</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=render-devtools-in-your-app>Render <code>&lt;DevTools></code> in Your App&mldr;<a href=#render-devtools-in-your-app class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Finally, include the <code>DevTools</code> component in your page.
A naïve way to do this would be to render it right in your <code>index.js</code>:</p><h5 id=indexjs><code>index.js</code><a href=#indexjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>render</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>configureStore</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./store/configureStore&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TodoApp</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/TodoApp&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Don&#39;t do this! You’re bringing DevTools into the production bundle.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/DevTools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>configureStore</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TodoApp</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>DevTools</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Provider&gt;</span>
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;app&#39;</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>We recommend a different approach. Create a <code>Root.js</code> component that renders the root of your application (usually some component surrounded by a <code>&lt;Provider></code>). Then use the same trick with conditional <code>require</code> statements to have two versions of it, one for development, and one for production:</p><h5 id=containersrootjs><code>containers/Root.js</code><a href=#containersrootjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>NODE_ENV</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;production&#39;</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./Root.prod&#39;</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./Root.dev&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=containersrootdevjs><code>containers/Root.dev.js</code><a href=#containersrootdevjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>Component</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TodoApp</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./TodoApp&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./DevTools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Root</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>store</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TodoApp</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>DevTools</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Provider&gt;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=containersrootprodjs><code>containers/Root.prod.js</code><a href=#containersrootprodjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>Component</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TodoApp</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./TodoApp&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Root</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>store</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TodoApp</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Provider&gt;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=or-open-them-in-a-new-window>&mldr;Or Open Them in a New Window<a href=#or-open-them-in-a-new-window class=hanchor arialabel=Anchor>&#8983;</a></h4><p>When you use <a href=https://github.com/gaearon/redux-devtools-dock-monitor><code>DockMonitor</code></a>, you usually want to render <code>&lt;DevTools></code> at the root of your app. It will appear in a docked container above it. However, you can also render it anywhere else in your React component tree. To do this, you can remove <code>DockMonitor</code> and instead render <code>&lt;DevTools></code> inside some component of your app. Don’t forget to create two versions of this component to exclude <code>DevTools</code> in production!</p><p>However you don’t even have to render <code>&lt;DevTools></code> in the same window. For example, you may prefer to display it in a popup. In this case, you can remove <code>DockMonitor</code> from <code>DevTools.js</code> and just use the <code>LogMonitor</code>, and have some code like this:</p><h5 id=indexjs-1><code>index.js</code><a href=#indexjs-1 class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>render</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>configureStore</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./store/configureStore&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/App&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>configureStore</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>App</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Provider&gt;,</span>
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;root&#39;</span>)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>NODE_ENV</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;production&#39;</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>showDevTools</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./showDevTools&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>showDevTools</span>(<span style=color:#a6e22e>store</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=showdevtoolsjs><code>showDevTools.js</code><a href=#showdevtoolsjs class=hanchor arialabel=Anchor>&#8983;</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>render</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/DevTools&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>showDevTools</span>(<span style=color:#a6e22e>store</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>popup</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>open</span>(<span style=color:#66d9ef>null</span>, <span style=color:#e6db74>&#39;Redux DevTools&#39;</span>, <span style=color:#e6db74>&#39;menubar=no,location=no,resizable=yes,scrollbars=no,status=no&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Reload in case it already exists
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>popup</span>.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>reload</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>popup</span>.document.<span style=color:#a6e22e>write</span>(<span style=color:#e6db74>&#39;&lt;div id=&#34;react-devtools-root&#34;&gt;&lt;/div&gt;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>DevTools</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>} <span style=color:#f92672>/&gt;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>popup</span>.document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;react-devtools-root&#39;</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Personal preferences vary, and whether to put the DevTools in a separate window, in a dock, or right inside you app’s user interface, is up to you. Make sure to check the documentation for the monitors you use and learn about the different props they support for customizing the appearance and the behavior.</p><p>Note that there are no useful props you can pass to the <code>DevTools</code> component other than the <code>store</code>. The <code>store</code> prop is needed if you don’t wrap <code>&lt;DevTools></code> in a <code>&lt;Provider></code>—just like with any connected component. To adjust the monitors, you need to pass props to them inside <code>DevTools.js</code> itself inside the <code>createDevTools()</code> call when they are used.</p><h3 id=gotchas>Gotchas<a href=#gotchas class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li><p><strong>Your reducers have to be pure and free of side effects to work correctly with DevTools.</strong> For example, even generating a random ID in reducer makes it impure and non-deterministic. Instead, do this in action creators.</p></li><li><p><strong>Make sure to only apply <code>DevTools.instrument()</code> and render <code>&lt;DevTools></code> in development!</strong> In production, this will be terribly slow because actions just accumulate forever. As described above, you need to use conditional <code>require</code>s and use <code>ProvidePlugin</code> (Webpack) or <code>loose-envify</code> (Browserify) together with Uglify to remove the dead code. Here is <a href=https://github.com/erikras/react-redux-universal-hot-example/>an example</a> that adds Redux DevTools handling the production case correctly.</p></li><li><p><strong>It is important that <code>DevTools.instrument()</code> store enhancer should be added to your middleware stack <em>after</em> <code>applyMiddleware</code> in the <code>compose</code>d functions, as <code>applyMiddleware</code> is potentially asynchronous.</strong> Otherwise, DevTools won’t see the raw actions emitted by asynchronous middleware such as <a href=https://github.com/acdlite/redux-promise>redux-promise</a> or <a href=https://github.com/gaearon/redux-thunk>redux-thunk</a>.</p></li></ul><h3 id=running-examples>Running Examples<a href=#running-examples class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Clone the project:</p><pre tabindex=0><code>git clone https://github.com/gaearon/redux-devtools.git
cd redux-devtools
</code></pre><p>Run <code>npm install</code> in the root folder:</p><pre tabindex=0><code>npm install
</code></pre><p>Now you can open an example folder and run <code>npm install</code> there:</p><pre tabindex=0><code>cd examples/counter # or examples/todomvc
npm install
</code></pre><p>Finally, run the development server and open the page:</p><pre tabindex=0><code>npm start
open http://localhost:3000
</code></pre><p>Try clicking on actions in the log, or changing some code inside the reducers. You should see the action log re-evaluate the state on every code change.</p><p>Also try opening <code>http://localhost:3000/?debug_session=123</code>, click around, and then refresh. You should see that all actions have been restored from the local storage.</p><h3 id=custom-monitors>Custom Monitors<a href=#custom-monitors class=hanchor arialabel=Anchor>&#8983;</a></h3><p><strong>DevTools accepts monitor components so you can build a completely custom UI.</strong> <a href=https://github.com/gaearon/redux-devtools-log-monitor><code>LogMonitor</code></a> and <a href=https://github.com/gaearon/redux-devtools-dock-monitor><code>DockMonitor</code></a> are just examples of what is possible.</p><p><strong><a href=https://github.com/gaearon/redux-devtools/issues/3>I challenge you to build a custom monitor for Redux DevTools!</a></strong></p><p>Some crazy ideas for custom monitors:</p><ul><li>A slider that lets you jump between computed states just by dragging it</li><li>An in-app layer that shows the last N states right in the app (e.g. for animation)</li><li>A time machine like interface where the last N states of your app reside on different Z layers</li><li>Feel free to come up with and implement your own! Check <a href=https://github.com/gaearon/redux-devtools-log-monitor><code>LogMonitor</code></a> <code>propTypes</code> to see what you can do.</li></ul><p>In fact some of these are implemented already:</p><h4 id=redux-slider-monitorhttpsgithubcomcalesceredux-slider-monitor><a href=https://github.com/calesce/redux-slider-monitor>redux-slider-monitor</a><a href=#redux-slider-monitorhttpsgithubcomcalesceredux-slider-monitor class=hanchor arialabel=Anchor>&#8983;</a></h4><p><img src=https://camo.githubusercontent.com/d61984306d27d5e0739efc2d57c56ba7aed7996c/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f662e636c2e6c792f6974656d732f3269314c3147316e3161316833793161324f31772f53637265656e2532305265636f7264696e67253230323031352d30382d3034253230617425323030372e3435253230504d2e676966 alt></p><h4 id=redux-devtools-filterable-log-monitorhttpsgithubcombvaughnredux-devtools-filterable-log-monitor><a href=https://github.com/bvaughn/redux-devtools-filterable-log-monitor/>redux-devtools-filterable-log-monitor</a><a href=#redux-devtools-filterable-log-monitorhttpsgithubcombvaughnredux-devtools-filterable-log-monitor class=hanchor arialabel=Anchor>&#8983;</a></h4><p><img src=https://cloud.githubusercontent.com/assets/29597/11937666/a438d56c-a7ca-11e5-848a-0d535d6c3e25.gif alt=reduxfilterablelogmonitor></p><h4 id=keep-them-coming>Keep them coming!<a href=#keep-them-coming class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Create a PR to add your custom monitor.</p><h3 id=license>License<a href=#license class=hanchor arialabel=Anchor>&#8983;</a></h3><p>MIT</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/misc/readme/><span class=button__icon>←</span>
<span class=button__text>README.md</span></a></span>
<span class="button next"><a href=/posts/nodejs/redux/><span class=button__text>redux.md</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>@linuxing3</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
<script src=/assets/languageSelector.js></script></div></body></html>