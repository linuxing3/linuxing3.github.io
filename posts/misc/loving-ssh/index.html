<!doctype html><html lang=en><head><title>loving-ssh.md :: Vim Emacser Personal Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ssh ssh 绝对不不仅仅是类似 telnet 这样远程登录管理主机那么简单。下面的些 技巧，或许可以激发起你对这个「老朋友」重新认识的兴趣。
有部分内容来自： ssh setting 。
直接指定运行远程主机的命令 ssh 其实可以直接指定运行远程主机的命令。例如，每次登录并查看线上的日志是件非常繁琐的累活。其实你可以使用下面的命令
ssh user@remotehost &amp;quot;taif -f /var/log/apache/access.log&amp;quot; 它会 ssh 登录以后直接执行指定的命令。这样我们可以构建本地脚本让其接受远程服务器的输出，做更多的事情。
不想开启 SFTP 工具传送文件 有时候不想开启 SFTP 工具传送文件，那么下面的命令会帮到你
tar cvfz - localFileOrDir | ssh user@remotehost 'cd /remote/path/to/unpack/ ; tar xvfz -' 这个命令可以自动将本地的文件或者目录打包压缩以后，通过 ssh 传输到 remotehost 主机，然后 remotehost 会自动将其解压缩。
不用每次都要输入密码 最后个 ssh 技巧，上面的技巧的确是很实用，但是我们也受不了每次都要输入次密码。如果你的确厌烦了这些，那么尝试执行下面的命令：
ssh user@remotehost 'cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys' &amp;lt; ~/.ssh/id_rsa.pub 这样远程的主机就会保存你本地的公钥，你就可以自动 ssh 登录远程主机（ 详细 ）。
ssh-copyid user@remotehost 顺便提醒：强烈提醒您保护好您主目录下的 ssh 私钥，否则您的帐户可能会面临风险。
进行端口的转发 将远程3128转到本地的8086"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/misc/loving-ssh/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content="https://twitter.com/linuxing3"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="loving-ssh.md"><meta property="og:description" content="ssh ssh 绝对不不仅仅是类似 telnet 这样远程登录管理主机那么简单。下面的些 技巧，或许可以激发起你对这个「老朋友」重新认识的兴趣。
有部分内容来自： ssh setting 。
直接指定运行远程主机的命令 ssh 其实可以直接指定运行远程主机的命令。例如，每次登录并查看线上的日志是件非常繁琐的累活。其实你可以使用下面的命令
ssh user@remotehost &amp;quot;taif -f /var/log/apache/access.log&amp;quot; 它会 ssh 登录以后直接执行指定的命令。这样我们可以构建本地脚本让其接受远程服务器的输出，做更多的事情。
不想开启 SFTP 工具传送文件 有时候不想开启 SFTP 工具传送文件，那么下面的命令会帮到你
tar cvfz - localFileOrDir | ssh user@remotehost 'cd /remote/path/to/unpack/ ; tar xvfz -' 这个命令可以自动将本地的文件或者目录打包压缩以后，通过 ssh 传输到 remotehost 主机，然后 remotehost 会自动将其解压缩。
不用每次都要输入密码 最后个 ssh 技巧，上面的技巧的确是很实用，但是我们也受不了每次都要输入次密码。如果你的确厌烦了这些，那么尝试执行下面的命令：
ssh user@remotehost 'cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys' &amp;lt; ~/.ssh/id_rsa.pub 这样远程的主机就会保存你本地的公钥，你就可以自动 ssh 登录远程主机（ 详细 ）。
ssh-copyid user@remotehost 顺便提醒：强烈提醒您保护好您主目录下的 ssh 私钥，否则您的帐户可能会面临风险。
进行端口的转发 将远程3128转到本地的8086"><meta property="og:url" content="/posts/misc/loving-ssh/"><meta property="og:site_name" content="Vim Emacser Personal Blog"><meta property="og:image" content="/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2018-02-16 14:05:34 -0400 -0400"></head><body class=green><div class="container full"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Terminal</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ▾</li></ul><ul class="language-selector__more hidden"><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><hr><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/misc/loving-ssh/>loving-ssh.md</a></h1><div class=post-meta><span class=post-date>2018-02-16</span></div><div class=post-content><div><h1 id=ssh>ssh<a href=#ssh class=hanchor arialabel=Anchor>&#8983;</a></h1><p>ssh 绝对不不仅仅是类似 telnet 这样远程登录管理主机那么简单。下面的些 技巧，或许可以激发起你对这个「老朋友」重新认识的兴趣。</p><p>有部分内容来自： <a href=http://derwiki.tumblr.com/post/841579929/how-i-learned-to-stop-worrying-and-love-ssh>ssh setting</a> 。</p><h2 id=直接指定运行远程主机的命令>直接指定运行远程主机的命令<a href=#直接指定运行远程主机的命令 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ssh 其实可以直接指定运行远程主机的命令。例如，每次登录并查看线上的日志是件非常繁琐的累活。其实你可以使用下面的命令</p><pre><code>ssh user@remotehost &quot;taif -f /var/log/apache/access.log&quot;
</code></pre><p>它会 ssh 登录以后直接执行指定的命令。这样我们可以构建本地脚本让其接受远程服务器的输出，做更多的事情。</p><h2 id=不想开启-sftp-工具传送文件>不想开启 SFTP 工具传送文件<a href=#不想开启-sftp-工具传送文件 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>有时候不想开启 SFTP 工具传送文件，那么下面的命令会帮到你</p><pre><code>tar cvfz - localFileOrDir | ssh user@remotehost 'cd /remote/path/to/unpack/ ; tar xvfz -'
</code></pre><p>这个命令可以自动将本地的文件或者目录打包压缩以后，通过 ssh 传输到 remotehost 主机，然后 remotehost 会自动将其解压缩。</p><h2 id=不用每次都要输入密码>不用每次都要输入密码<a href=#不用每次都要输入密码 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>最后个 ssh 技巧，上面的技巧的确是很实用，但是我们也受不了每次都要输入次密码。如果你的确厌烦了这些，那么尝试执行下面的命令：</p><pre><code>ssh user@remotehost 'cat &gt;&gt; ~/.ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub
</code></pre><p>这样远程的主机就会保存你本地的公钥，你就可以自动 ssh 登录远程主机（ 详细 ）。</p><pre><code>ssh-copyid user@remotehost
</code></pre><p>顺便提醒：强烈提醒您保护好您主目录下的 ssh 私钥，否则您的帐户可能会面临风险。</p><h2 id=进行端口的转发>进行端口的转发<a href=#进行端口的转发 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>将远程3128转到本地的8086</p><pre><code>ssh username@remotehost -p 8090 -R 3128:localhost:8086
</code></pre><p>将本地3128转到远程的8086,可以是第三个主机</p><pre><code>ssh username@remotehost -p 8090 -L 3128:remote:8086
</code></pre><h2 id=还有些有用的参数>还有些有用的参数<a href=#还有些有用的参数 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>-C 这个参数可以将文本数据压缩传送
-X 如果远程服务器支持 X11 forwarding ，那么远程的 X 应用直接可以在本地显示运行（当然你本地要有 X Server）</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/misc/lapis/><span class=button__icon>←</span>
<span class=button__text>lapis.md</span></a></span>
<span class="button next"><a href=/posts/misc/lua_creating_configurations/><span class=button__text>lua_creating_configurations.md</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>@linuxing3</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
<script src=/assets/languageSelector.js></script></div></body></html>