<!doctype html><html lang=en><head><title>using-python-in-emacs.org :: Vim Emacser Personal Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Some Description"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/emacs/using-python-in-emacs/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content="https://twitter.com/linuxing3"><meta name=twitter:creator content="Xing Wenju"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="using-python-in-emacs.org"><meta property="og:description" content="Some Description"><meta property="og:url" content="/posts/emacs/using-python-in-emacs/"><meta property="og:site_name" content="Vim Emacser Personal Blog"><meta property="og:image" content="/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2018-02-16 20:03:50 -0400 -0400"></head><body class=green><div class="container full"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Terminal</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ▾</li></ul><ul class="language-selector__more hidden"><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><hr><li><a href=/>English</a></li><li><a href=/zh/>中文</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/emacs/using-python-in-emacs/>using-python-in-emacs.org</a></h1><div class=post-meta><span class=post-date>2018-02-16</span>
<span class=post-author>:: Xing Wenju</span></div><span class=post-tags>#<a href=/tags/hugo-emacs/>hugo emacs</a>&nbsp;</span><div class=post-content><div><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Table of Contents</h2><div id=outline-text-headline-1 class=outline-text-2><ul><li><p><a href=#description>Description</a></p><ul><li><a href=#features>Features:</a></li></ul></li><li><p><a href=#install>Install</a></p><ul><li><a href=#layer>Layer</a></li><li><p><a href=#dependencies>Dependencies</a></p><ul><li><a href=#auto-completion-anaconda-dependencies>Auto-completion: Anaconda dependencies</a></li><li><a href=#syntax-checking>Syntax checking</a></li></ul></li><li><a href=#test-runner>Test runner</a></li><li><a href=#automatic-buffer-formatting-on-save>Automatic buffer formatting on save</a></li><li><a href=#automatic-save-of-buffer-when-testing>Automatic save of buffer when testing</a></li><li><a href=#autoflake>autoflake</a></li><li><a href=#pylookup>pylookup</a></li><li><a href=#hy-mode>Hy-mode</a></li></ul></li><li><p><a href=#configuration>Configuration</a></p><ul><li><a href=#fill-column>Fill column</a></li><li><a href=#sort-imports>Sort imports</a></li></ul></li><li><p><a href=#management-of-python-versions-and-virtual-environments>Management of Python versions and virtual environments</a></p><ul><li><a href=#manage-virtual-environments-with-pyvenv>Manage virtual environments with pyvenv</a></li><li><p><a href=#manage-multiple-python-versions-with-pyenv>Manage multiple Python versions with pyenv</a></p><ul><li><a href=#automatic-activation-of-local-pyenv-version>Automatic activation of local pyenv version</a></li></ul></li></ul></li><li><p><a href=#key-bindings>Key Bindings</a></p><ul><li><a href=#inferior-repl-process>Inferior REPL process</a></li><li><a href=#running-python-script-in-shell>Running Python Script in shell</a></li><li><a href=#testing>Testing</a></li><li><a href=#refactoring>Refactoring</a></li><li><a href=#pip-package-management>Pip package management</a></li><li><a href=#live-coding>Live coding</a></li><li><a href=#hy-repl-process>Hy REPL process</a></li><li><a href=#other-python-commands>Other Python commands</a></li></ul></li></ul></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>Description</h2><div id=outline-text-headline-2 class=outline-text-2><p>This layer adds support for the Python language.</p><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>Features:</h3><div id=outline-text-headline-3 class=outline-text-3><ul><li>Auto-completion using <a href=https://github.com/proofit404/anaconda-mode>anaconda-mode</a></li><li>Code Navigation using <a href=https://github.com/proofit404/anaconda-mode>anaconda-mode</a></li><li>Documentation Lookup using <a href=https://github.com/proofit404/anaconda-mode>anaconda-mode</a> and <a href=https://github.com/tsgates/pylookup>pylookup</a></li><li>Test Runners using <a href=https://github.com/syl20bnr/nose.el>nose.el</a> or <a href=https://github.com/ionrock/pytest-el>pytest</a></li><li>Virtual Environment using <a href=https://github.com/jorgenschaefer/pyvenv>pyvenv</a> and <a href=https://github.com/yyuu/pyenv>pyenv</a></li><li>semantic mode is enabled</li><li>PEP8 compliant formatting via <a href=https://github.com/google/yapf>YAPF</a></li><li>PEP8 checks with <a href=https://pypi.python.org/pypi/flake8>flake8</a> or <a href=https://pypi.python.org/pypi/pylint/1.6.4>pylint</a></li><li>Suppression of unused import with <a href=https://github.com/myint/autoflake>autoflake</a></li><li>Use the <code>%</code> key to jump between blocks with <a href=https://github.com/redguardtoo/evil-matchit>evil-matchit</a></li><li>Sort imports with <a href=https://pypi.python.org/pypi/isort>isort</a></li><li>Fix a missing import statement with <a href=https://github.com/anachronic/importmagic.el>importmagic</a></li><li>Pip package manager with <a href=https://github.com/brotzeit/pippel>pippel</a></li></ul></div></div></div></div><div id=outline-container-headline-4 class=outline-2><h2 id=headline-4>Install</h2><div id=outline-text-headline-4 class=outline-text-2><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Layer</h3><div id=outline-text-headline-5 class=outline-text-3><p>To use this configuration layer, add it to your <code class=verbatim>~/.spacemacs</code>. You will need to
add <code class=verbatim>python</code> to the existing <code class=verbatim>dotspacemacs-configuration-layers</code> list in this
file.</p></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>Dependencies</h3><div id=outline-text-headline-6 class=outline-text-3><div id=outline-container-headline-7 class=outline-4><h4 id=headline-7>Auto-completion: Anaconda dependencies</h4><div id=outline-text-headline-7 class=outline-text-4><p><code class=verbatim>anaconda-mode</code> tries to install the dependencies itself but sometimes
it does not work and you may encounter the following message when
opening a python buffer:</p><pre class=example>
    Blocking call to accept-process-output with quit inhibited!!
</pre><p>To fix this, install the <code class=verbatim>anaconda-mode</code> <a href=https://github.com/proofit404/anaconda-mode/wiki>anaconda-deps</a> by hand:</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    pip install --upgrade <span style=color:#e6db74>&#34;jedi&gt;=0.9.0&#34;</span> <span style=color:#e6db74>&#34;json-rpc&gt;=1.8.1&#34;</span> <span style=color:#e6db74>&#34;service_factory&gt;=0.1.5&#34;</span></span></span></code></pre></div></div><p>If you encounter problems with Jedi 1.0 consider downgrading to 0.9.0. See <a href=https://github.com/davidhalter/jedi/issues/873>this
issue</a> for details.</p><p>Source: <a href=https://github.com/proofit404/anaconda-mode#issues>https://github.com/proofit404/anaconda-mode#issues</a></p><p>If you are facing errors such as "Unable to run anaconda-mode server", try
setting your <code class=verbatim>PYTHONPATH</code> as explained at
<a href=https://github.com/proofit404/anaconda-mode#pythonpath>https://github.com/proofit404/anaconda-mode#pythonpath</a></p></div></div><div id=outline-container-headline-8 class=outline-4><h4 id=headline-8>Syntax checking</h4><div id=outline-text-headline-8 class=outline-text-4><p>Syntax checking uses <code class=verbatim>flake8</code> package:</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    pip install flake8</span></span></code></pre></div></div></div></div></div></div><div id=outline-container-headline-9 class=outline-3><h3 id=headline-9>Test runner</h3><div id=outline-text-headline-9 class=outline-text-3><p>Both <code class=verbatim>nose</code> and <code class=verbatim>pytest</code> are supported. By default <code class=verbatim>nose</code> is used.
To choose your test runner set the layer variable <code class=verbatim>python-test-runner</code> to
either <code class=verbatim>nose</code> or <code class=verbatim>pytest</code>.</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default dotspacemacs-configuration-layers
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((python :variables python-test-runner <span style=color:#e6db74>&#39;pytest</span>)))</span></span></code></pre></div></div><p>If you need both then you can set <code class=verbatim>python-test-runner</code> to a list like this:</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default dotspacemacs-configuration-layers
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((python :variables python-test-runner <span style=color:#f92672>&#39;</span>(pytest nose))))</span></span></code></pre></div></div><p>This means that <code class=verbatim>pytest</code> is your primary test runner. To use the secondary test
runner you can call the test functions with a prefix argument e.g. <code>SPC u SPC m
t t</code> to run one test with <code class=verbatim>nose</code>.</p><p>To set project specific test runners you can set <code class=verbatim>python-test-runner</code> in a
directory local variable in your project root. <code>SPC f v d</code> in Spacemacs. See
<a href=https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html>the official documentation</a> for more information.</p><p>The root of the project is detected with a <code class=verbatim>.git</code> directory or a <code class=verbatim>setup.cfg</code> file.</p></div></div><div id=outline-container-headline-10 class=outline-3><h3 id=headline-10>Automatic buffer formatting on save</h3><div id=outline-text-headline-10 class=outline-text-3><p>To enable automatic buffer formatting on save with <a href=https://github.com/google/yapf>YAPF</a> set the variable
<code class=verbatim>python-enable-yapf-format-on-save</code> to <code class=verbatim>t</code>.</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>  (setq-default dotspacemacs-configuration-layers <span style=color:#f92672>&#39;</span>(
</span></span><span style=display:flex><span>    (python :variables python-enable-yapf-format-on-save <span style=color:#66d9ef>t</span>)))</span></span></code></pre></div></div></div></div><div id=outline-container-headline-11 class=outline-3><h3 id=headline-11>Automatic save of buffer when testing</h3><div id=outline-text-headline-11 class=outline-text-3><p>By default a buffer is automatically saved before tests are executed upon it,
you can disable this feature by setting <code class=verbatim>python-save-before-test</code> to <code class=verbatim>nil</code>.</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>  (setq-default dotspacemacs-configuration-layers <span style=color:#f92672>&#39;</span>(
</span></span><span style=display:flex><span>    (python :variables python-save-before-test <span style=color:#66d9ef>nil</span>)))</span></span></code></pre></div></div></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>autoflake</h3><div id=outline-text-headline-12 class=outline-text-3><p>To be able to suppress unused imports easily, install <a href=https://github.com/myint/autoflake>autoflake</a>:</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  pip install autoflake</span></span></code></pre></div></div></div></div><div id=outline-container-headline-13 class=outline-3><h3 id=headline-13>pylookup</h3><div id=outline-text-headline-13 class=outline-text-3><p>To use <code class=verbatim>pylookup</code> on <code>SPC m h H</code>, make sure you update the database first, using
<code>SPC SPC pylookup-update</code>.</p></div></div><div id=outline-container-headline-14 class=outline-3><h3 id=headline-14>Hy-mode</h3><div id=outline-text-headline-14 class=outline-text-3><p>To be able to connect to an inferior lisp repl in <code class=verbatim>hy-mode</code>, you need to make sure
that hy is installed.</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  pip install hy</span></span></code></pre></div></div></div></div></div></div><div id=outline-container-headline-15 class=outline-2><h2 id=headline-15>Configuration</h2><div id=outline-text-headline-15 class=outline-text-2><div id=outline-container-headline-16 class=outline-3><h3 id=headline-16>Fill column</h3><div id=outline-text-headline-16 class=outline-text-3><p>If you want to customize the fill column value, use something like this inside
the <code class=verbatim>user-init</code> function in your <code class=verbatim>.spacemacs</code>:</p><div class="src src-elisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elisp data-lang=elisp><span style=display:flex><span>(setq-default dotspacemacs-configuration-layers <span style=color:#f92672>&#39;</span>(
</span></span><span style=display:flex><span>    (python :variables python-fill-column <span style=color:#ae81ff>99</span>)))</span></span></code></pre></div></div></div></div><div id=outline-container-headline-17 class=outline-3><h3 id=headline-17>Sort imports</h3><div id=outline-text-headline-17 class=outline-text-3><p>If you want imports to be automatically sorted when you save a file (using
<a href=https://pypi.python.org/pypi/isort>isort</a>), set the <code class=verbatim>python-sort-imports-on-save</code> variable in the python layer
config section:</p><div class="src src-elisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elisp data-lang=elisp><span style=display:flex><span>(setq-default dotspacemacs-configuration-layers
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((python :variables python-sort-imports-on-save <span style=color:#66d9ef>t</span>)))</span></span></code></pre></div></div><p>or as a directory-local variable (for per-project settings).</p></div></div></div></div><div id=outline-container-headline-18 class=outline-2><h2 id=headline-18>Management of Python versions and virtual environments</h2><div id=outline-text-headline-18 class=outline-text-2><div id=outline-container-headline-19 class=outline-3><h3 id=headline-19>Manage virtual environments with pyvenv</h3><div id=outline-text-headline-19 class=outline-text-3><p>A virtual environment provides isolation of your Python package versions. For a
general overview see <a href=http://docs.python-guide.org/en/latest/dev/virtualenvs/>this site</a>. <a href=http://virtualenvwrapper.readthedocs.io/en/latest/index.html>Virtualenvwrapper</a> which is also explained in the
previous link, is a program which manages your virtual environments in a central
location set by the <code class=verbatim>WORKON_HOME</code> environment variable.</p><p>Spacemacs integration of virtual environments and virtualenvwrapper is provided
by the <a href=https://github.com/jorgenschaefer/pyvenv>pyvenv</a> package. It provides the following keybindings:</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m V a</code></td><td>激活任何目录下的虚拟环境 activate a virtual environment in any directory</td></tr><tr><td><code>SPC m V d</code></td><td>停止虚拟环境 deactivate active virtual environment</td></tr><tr><td><code>SPC m V w</code></td><td>在 WORKON 目录工作 work on virtual environment in <code class=verbatim>WORKON_HOME</code></td></tr></tbody></table></div></div><div id=outline-container-headline-20 class=outline-3><h3 id=headline-20>Manage multiple Python versions with pyenv</h3><div id=outline-text-headline-20 class=outline-text-3><p>If you need multiple Python versions (e.g. Python 2 and Python 3) then take a
look at <a href=https://github.com/yyuu/pyenv>pyenv</a>. It enables the installation and managment of multiple
Python versions.
<a href=https://www.brianthicks.com/post/2015/04/15/automate-your-python-environment-with-pyenv/>This blogpost</a> gives a good overview on how to use the tool. Spacemacs
integration is provided by <a href=https://github.com/proofit404/pyenv-mode>pyenv mode</a> which has the following keybindings.</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m v s</code></td><td>set a pyenv environment with <a href=https://github.com/pyenv/pyenv>pyenv</a></td></tr><tr><td><code>SPC m v u</code></td><td>unset a pyenv environment with <a href=https://github.com/pyenv/pyenv>pyenv</a></td></tr></tbody></table><p>Pyenv can also manage virtual environments for each of the Python versions it
has installed. Those will be listed alongside your Python versions.</p><div id=outline-container-headline-21 class=outline-4><h4 id=headline-21>Automatic activation of local pyenv version</h4><div id=outline-text-headline-21 class=outline-text-4><p>A project-specific pyenv version may be written to a file called
<code class=verbatim>.python-version</code> using the <a href=https://github.com/yyuu/pyenv/blob/master/COMMANDS.md#user-content-pyenv-local>pyenv local</a> command.</p><p>Spacemacs can search in parent directories for this file, and automatically set
the pyenv version. The behavior can be set with the variable
<code class=verbatim>python-auto-set-local-pyenv-version</code> to:</p><ul><li><code class=verbatim>on-visit</code> (default) set the version when you visit a python buffer,</li><li><code class=verbatim>on-project-switch</code> set the version when you switch projects,</li><li><code class=verbatim>nil</code> to disable.</li></ul><p>The same is also possible on pyvenv with a file called <code class=verbatim>.venv</code>. The behavior
can be set with the variable <code class=verbatim>python-auto-set-local-pyvenv-virtualenv=</code> to:</p><ul><li><code class=verbatim>on-visit</code> (default) set the virtualenv when you visit a python buffer,</li><li><code class=verbatim>on-project-switch</code> set the virtualenv when you switch projects,</li><li><code class=verbatim>nil</code> to disable.</li></ul></div></div></div></div></div></div><div id=outline-container-headline-22 class=outline-2><h2 id=headline-22>Key Bindings</h2><div id=outline-text-headline-22 class=outline-text-2><div id=outline-container-headline-23 class=outline-3><h3 id=headline-23>Inferior REPL process</h3><div id=outline-text-headline-23 class=outline-text-3><p>Start a Python or iPython inferior REPL process with <code>SPC m s i</code>.
If <code class=verbatim>ipython</code> is available in system executable search paths, <code class=verbatim>ipython</code>
will be used to launch python shell; otherwise, default <code class=verbatim>python</code>
interpreter will be used. You may change your system executable
search path by activating a virtual environment.</p><p>Send code to inferior process commands:</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m s b</code></td><td>send buffer and keep code buffer focused</td></tr><tr><td><code>SPC m s B</code></td><td>send buffer and switch to REPL in insert mode</td></tr><tr><td><code>SPC m s f</code></td><td>send function and keep code buffer focused</td></tr><tr><td><code>SPC m s F</code></td><td>send function and switch to REPL in insert mode</td></tr><tr><td><code>SPC m s i</code></td><td>start inferior REPL process</td></tr><tr><td><code>SPC m s r</code></td><td>send region and keep code buffer focused</td></tr><tr><td><code>SPC m s R</code></td><td>send region and switch to REPL in insert mode</td></tr><tr><td><code>CTRL+j</code></td><td>next item in REPL history</td></tr><tr><td><code>CTRL+k</code></td><td>previous item in REPL history</td></tr></tbody></table></div></div><div id=outline-container-headline-24 class=outline-3><h3 id=headline-24>Running Python Script in shell</h3><div id=outline-text-headline-24 class=outline-text-3><p>To run a Python script like you would in the shell press <code>SPC m c c</code>
to start the Python script in comint mode. This is useful when working with
multiple Python files since the REPL does not reload changes made in other
modules.</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m c c</code></td><td>Execute current file in a comint shell</td></tr><tr><td><code>SPC m c C</code></td><td>Execute current file in a comint shell and switch to it in <code class=verbatim>insert state</code></td></tr></tbody></table><p><strong>Note:</strong> With the universal argument <code>SPC u</code> you can enter a new
compilation command.</p></div></div><div id=outline-container-headline-25 class=outline-3><h3 id=headline-25>Testing</h3><div id=outline-text-headline-25 class=outline-text-3><p>Test commands start with <code>m t</code>. To use the secondary test runner call the
function with a prefix argument, for example <code>SPC u SPC m t a</code>.</p><table><thead><tr><th>No Debug</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m t a</code></td><td>launch all tests of the project</td></tr><tr><td><code>SPC m t b</code></td><td>launch all tests of the current buffer (same as module)</td></tr><tr><td><code>SPC m t m</code></td><td>launch all tests of the current module</td></tr><tr><td><code>SPC m t s</code></td><td>launch all tests of the current suite (only with <code class=verbatim>nose</code>)</td></tr><tr><td><code>SPC m t t</code></td><td>launch the current test (function)</td></tr></tbody></table><table><thead><tr><th>Debug</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m t A</code></td><td>launch all tests of the project in debug mode</td></tr><tr><td><code>SPC m t B</code></td><td>launch all tests of the current buffer (module) in debug mode</td></tr><tr><td><code>SPC m t M</code></td><td>launch all tests of the current module in debug mode</td></tr><tr><td><code>SPC m t S</code></td><td>launch all tests of the current suite in debug mode (only with <code class=verbatim>nose</code>)</td></tr><tr><td><code>SPC m t T</code></td><td>launch the current test (function) in debug mode</td></tr></tbody></table></div></div><div id=outline-container-headline-26 class=outline-3><h3 id=headline-26>Refactoring</h3><div id=outline-text-headline-26 class=outline-text-3><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m r f</code></td><td>fix a missing import statement with <a href=https://pypi.python.org/pypi/importmagic>importmagic</a></td></tr><tr><td><code>SPC m r i</code></td><td>remove unused imports with <a href=https://github.com/myint/autoflake>autoflake</a></td></tr><tr><td><code>SPC m r I</code></td><td>sort imports with <a href=https://pypi.python.org/pypi/isort>isort</a></td></tr></tbody></table></div></div><div id=outline-container-headline-27 class=outline-3><h3 id=headline-27>Pip package management</h3><div id=outline-text-headline-27 class=outline-text-3><p>In python buffer type <code>SPC m P</code> to open buffer listing all installed <code class=verbatim>pip</code>
packages in the currently activated virtual environment.</p><p><strong>Note:</strong> To open this menu from outside a python buffer type
<code>SPC SPC pippel-list-packages RET</code> .</p><p>In the package list buffer:</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>RET</code></td><td>follow link (<code class=verbatim>pippel-menu-visit-homepage</code>)</td></tr><tr><td><code>d</code></td><td>mark for deletion (<code class=verbatim>pippel-menu-mark-delete</code>)</td></tr><tr><td><code>i</code></td><td>prompt user for packages (<code class=verbatim>pippel-install-package</code>)</td></tr><tr><td><code>m</code></td><td>remove mark (<code class=verbatim>pippel-menu-mark-unmark</code>)</td></tr><tr><td><code>r</code></td><td>refresh package list (<code class=verbatim>pippel-list-packages</code>)</td></tr><tr><td><code>U</code></td><td>mark all upgradable (<code class=verbatim>pippel-menu-mark-all-upgrades</code>)</td></tr><tr><td><code>u</code></td><td>mark for upgrade (<code class=verbatim>pippel-menu-mark-upgrade</code>)</td></tr><tr><td><code>x</code></td><td>perform marked package menu actions (<code class=verbatim>pippel-menu-execute</code>)</td></tr></tbody></table></div></div><div id=outline-container-headline-28 class=outline-3><h3 id=headline-28>Live coding</h3><div id=outline-text-headline-28 class=outline-text-3><p>Live coding is provided by the <a href=https://github.com/donkirkby/live-py-plugin>live-py-plugin.</a></p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m l</code></td><td>Toggle live-py-mode</td></tr></tbody></table></div></div><div id=outline-container-headline-29 class=outline-3><h3 id=headline-29>Hy REPL process</h3><div id=outline-text-headline-29 class=outline-text-3><p>Start a Hy inferior repel process with <code>SPC m s i</code>. If <code class=verbatim>hy</code> is
available in system executable search paths, <code class=verbatim>hy</code> will be used to
launch the shell. You may change your system executable search path
by activating a virtual enviornment.</p><p>Send code to hy REPL commands:</p><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m s b</code></td><td>send buffer and keep code buffer focused</td></tr><tr><td><code>SPC m s B</code></td><td>switch to REPL</td></tr><tr><td><code>SPC m s e</code></td><td>send sexp in front of the cursor to the REPL</td></tr><tr><td><code>SPC m s f</code></td><td>send function to REPL and stay in buffer</td></tr><tr><td><code>SPC m s F</code></td><td>send function to REPL and switch to repl buffer</td></tr><tr><td><code>SPC m s i</code></td><td>start inferior hy repl</td></tr><tr><td><code>SPC m s r</code></td><td>send current region to the REPL and stay in buffer</td></tr><tr><td><code>SPC m s R</code></td><td>send current region to the REPL and switch to repl buffer</td></tr></tbody></table></div></div><div id=outline-container-headline-30 class=outline-3><h3 id=headline-30>Other Python commands</h3><div id=outline-text-headline-30 class=outline-text-3><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m =</code></td><td>Reformat the buffer according to PEP8 using <a href=https://github.com/google/yapf>YAPF</a></td></tr><tr><td><code>SPC m d b</code></td><td>toggle a breakpoint using <code class=verbatim>wdb</code>, <code class=verbatim>ipdb</code>, <code class=verbatim>pudb</code> or <code class=verbatim>pdb</code></td></tr><tr><td><code>SPC m g g</code></td><td>go to definition using <code class=verbatim>anaconda-mode-find-definitions</code> (<code>C-o</code> to jump back)</td></tr><tr><td><code>SPC m g a</code></td><td>go to assignment using <code class=verbatim>anaconda-mode-find-assignments</code> (<code>C-o</code> to jump back)</td></tr><tr><td><code>SPC m g b</code></td><td>jump back</td></tr><tr><td><code>SPC m g u</code></td><td>navigate between usages with <code class=verbatim>anaconda-mode-find-references</code></td></tr><tr><td><code>SPC m h d</code></td><td>look for documentation using <code class=verbatim>helm-pydoc</code></td></tr><tr><td><code>SPC m h h</code></td><td>quick documentation using anaconda</td></tr><tr><td><code>SPC m h H</code></td><td>open documentation in <code class=verbatim>firefox</code> using <a href=https://github.com/tsgates/pylookup>pylookup</a></td></tr><tr><td><code>SPC m v s</code></td><td>set a pyenv environment with <a href=https://github.com/pyenv/pyenv>pyenv</a></td></tr><tr><td><code>SPC m v u</code></td><td>unset a pyenv environment with <a href=https://github.com/pyenv/pyenv>pyenv</a></td></tr><tr><td><code>SPC m V w</code></td><td>work on virtual environment in <code class=verbatim>WORKON_HOME</code></td></tr><tr><td><code>SPC m V a</code></td><td>activate a virtual environment in any directory</td></tr><tr><td><code>SPC m V d</code></td><td>deactivate active virtual environment</td></tr></tbody></table></div></div></div></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/emacs/using-macro-in-emacs/><span class=button__icon>←</span>
<span class=button__text>using-macro-in-emacs.org</span></a></span>
<span class="button next"><a href=/posts/emacs/using-spacemacs-base-in-emacs/><span class=button__text>using-spacemacs-base-in-emacs.org</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>@linuxing3</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
<script src=/assets/languageSelector.js></script></div></body></html>