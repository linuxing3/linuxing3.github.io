<!doctype html><html lang=en><head><title>using-clojure-in-emacs.org :: Vim Emacser Personal Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Some Description"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/emacs/using-clojure-in-emacs/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content="https://twitter.com/linuxing3"><meta name=twitter:creator content="Xing Wenju"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="using-clojure-in-emacs.org"><meta property="og:description" content="Some Description"><meta property="og:url" content="/posts/emacs/using-clojure-in-emacs/"><meta property="og:site_name" content="Vim Emacser Personal Blog"><meta property="og:image" content="/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2018-02-16 20:03:50 -0400 -0400"></head><body class=green><div class="container full"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Terminal</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ‚ñæ</li></ul><ul class="language-selector__more hidden"><li><a href=/>English</a></li><li><a href=/zh/>‰∏≠Êñá</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/journal>Journal</a></li><li><a href=/showcase>Showcase</a></li><hr><li><a href=/>English</a></li><li><a href=/zh/>‰∏≠Êñá</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/emacs/using-clojure-in-emacs/>using-clojure-in-emacs.org</a></h1><div class=post-meta><span class=post-date>2018-02-16</span>
<span class=post-author>:: Xing Wenju</span></div><span class=post-tags>#<a href=/tags/hugo-emacs/>hugo emacs</a>&nbsp;</span><div class=post-content><div><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Clojure layer</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Table of Contents</h3><div id=outline-text-headline-2 class=outline-text-3><ul><li><p><a href=#clojure-layer>Clojure layer</a></p><ul><li><p><a href=#description>Description</a></p><ul><li><a href=#features>Features:</a></li></ul></li><li><p><a href=#install>Install</a></p><ul><li><a href=#layer>Layer</a></li><li><a href=#pretty-symbols>Pretty Symbols</a></li><li><p><a href=#cider-and-clj-refactor>CIDER and clj-refactor</a></p><ul><li><a href=#quick-start-with-boot>Quick Start with boot</a></li><li><a href=#quick-start-with-lein>Quick Start with lein</a></li><li><a href=#more-details>More details</a></li></ul></li></ul></li><li><p><a href=#usage>Usage</a></p><ul><li><a href=#cheatsheet>Cheatsheet</a></li><li><a href=#structuraly-safe-editing>Structuraly safe editing</a></li><li><p><a href=#key-bindings>Key Bindings</a></p><ul><li><a href=#working-with-clojure-files-barfage-slurpage--more>Working with clojure files (barfage, slurpage & more)</a></li></ul></li><li><p><a href=#leader>Leader</a></p><ul><li><a href=#documentation>Documentation</a></li><li><a href=#evaluation>Evaluation</a></li><li><a href=#goto>Goto</a></li><li><a href=#repl>REPL</a></li><li><a href=#tests>Tests</a></li><li><a href=#toggles>Toggles</a></li><li><a href=#debugging>Debugging</a></li><li><a href=#refactoring>Refactoring</a></li><li><a href=#reformatting>Reformatting</a></li></ul></li><li><p><a href=#cider-buffers>CIDER Buffers</a></p><ul><li><a href=#stacktrace-mode>stacktrace-mode</a></li><li><a href=#inspector-mode>inspector-mode</a></li><li><a href=#test-report-mode>test-report-mode</a></li></ul></li><li><p><a href=#sayid-buffers>Sayid Buffers</a></p><ul><li><a href=#sayid-mode>sayid-mode</a></li><li><a href=#sayid-traced-mode>sayid-traced-mode</a></li><li><a href=#sayid-pprint>sayid-pprint</a></li><li><a href=#cider-repl-mode>cider-repl-mode</a></li></ul></li><li><p><a href=#development-notes>Development Notes</a></p><ul><li><a href=#indentation>Indentation</a></li></ul></li></ul></li></ul></li></ul></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>Description</h3><div id=outline-text-headline-3 class=outline-text-3><p>This layer adds support for <a href=https://clojure.org/>Clojure</a> language using <a href=https://github.com/clojure-emacs/cider>CIDER</a>.</p><div id=outline-container-headline-4 class=outline-4><h4 id=headline-4>Features:</h4><div id=outline-text-headline-4 class=outline-text-4><ul><li>REPL via <a href=https://github.com/clojure-emacs/cider>CIDER</a></li><li>Code formatting via <a href=https://github.com/clojure-emacs/cider>CIDER</a> using <a href=https://github.com/weavejester/cljfmt>Cljfmt</a></li><li>Refactoring via <a href=https://github.com/clojure-emacs/clj-refactor.el>clj-refactor</a></li><li>Aligning of code forms via <a href=https://github.com/clojure-emacs/clojure-mode>clojure-mode</a></li><li>Debugging with <a href=https://bpiel.github.io/sayid/>sayid</a></li><li>Clojure cheatsheet</li><li>Structuraly safe editing using optional <a href=https://github.com/luxbock/evil-cleverparens>evil-cleverparens</a></li></ul></div></div></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Install</h3><div id=outline-text-headline-5 class=outline-text-3><div id=outline-container-headline-6 class=outline-4><h4 id=headline-6>Layer</h4><div id=outline-text-headline-6 class=outline-text-4><p>To use this configuration layer, add it to your <code class=verbatim>~/.spacemacs</code>. You will need to
add <code class=verbatim>clojure</code> to the existing <code class=verbatim>dotspacemacs-configuration-layers</code> list in this
file.</p></div></div><div id=outline-container-headline-7 class=outline-4><h4 id=headline-7>Pretty Symbols</h4><div id=outline-text-headline-7 class=outline-text-4><p>Pretty symbols for anonymous functions, set literals and partial, like <code class=verbatim>(Œª [a]
(+ a 5))</code>, <code class=verbatim>∆í(+ % 5)</code>, <code class=verbatim>‚àà{2 4 6}</code> and <code class=verbatim>∆§</code>.</p><p>To enable this feature, add the following snippet to the
<code class=verbatim>dotspacemacs/user-config</code> section of your <code class=verbatim>~/.spacemacs</code> file:</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span> (setq clojure-enable-fancify-symbols <span style=color:#66d9ef>t</span>)</span></span></code></pre></div></div><p>Or set this variable when loading the configuration layer:</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span> (setq-default dotspacemacs-configuration-layers
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>((clojure :variables clojure-enable-fancify-symbols <span style=color:#66d9ef>t</span>)))</span></span></code></pre></div></div></div></div><div id=outline-container-headline-8 class=outline-4><h4 id=headline-8>CIDER and clj-refactor</h4><div id=outline-text-headline-8 class=outline-text-4><p>Note that recent versions of CIDER automatically inject the required
dependencies into your boot or leiningen configuration when you connect to the
REPL. Thus, the configuration instructions below only apply to CIDER 0.10 and
older. Most users should be able to just run <code>SPC m s i</code> to connect to the CIDER
REPL and skip the rest of this section.</p><div id=outline-container-headline-9 class=outline-5><h5 id=headline-9>Quick Start with boot</h5><div id=outline-text-headline-9 class=outline-text-5><ul><li>Install <code class=verbatim>boot</code> (see <a href=https://github.com/boot-clj/boot#user-content-install)>https://github.com/boot-clj/boot#user-content-install)</a></li><li>Create a file <code class=verbatim>~/.boot/profile.boot</code> with the following content:</li></ul><div class="src src-clojure"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure><span style=display:flex><span>(<span style=color:#a6e22e>require</span> <span style=color:#e6db74>&#39;boot.repl</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>swap!</span> boot.repl/*default-dependencies* conj
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>[refactor-nrepl <span style=color:#e6db74>&#34;1.2.0-SNAPSHOT&#34;</span>]
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>[cider/cider-nrepl <span style=color:#e6db74>&#34;0.10.0-SNAPSHOT&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>swap!</span> boot.repl/*default-middleware* conj
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;refactor-nrepl.middleware/wrap-refactor</span>)</span></span></code></pre></div></div><ul><li>Run <code>SPC m s i</code> in any of the clojure source files to connect to the CIDER
REPL. Note that a build.boot file must be present in your working directory
for Cider to recognize the presence of boot.</li></ul></div></div><div id=outline-container-headline-10 class=outline-5><h5 id=headline-10>Quick Start with lein</h5><div id=outline-text-headline-10 class=outline-text-5><ul><li>Install <code class=verbatim>lein</code> version 2.5.2 or newer (see <a href=https://leiningen.org/#install)>https://leiningen.org/#install)</a></li><li>Create a file <code class=verbatim>~/.lein/profiles.clj</code> with the following content:</li></ul><div class="src src-clojure"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure><span style=display:flex><span> {<span style=color:#e6db74>:repl</span> {<span style=color:#e6db74>:plugins</span> [[cider/cider-nrepl <span style=color:#e6db74>&#34;0.10.0-SNAPSHOT&#34;</span>]
</span></span><span style=display:flex><span>                   [refactor-nrepl <span style=color:#e6db74>&#34;2.0.0-SNAPSHOT&#34;</span>]]
</span></span><span style=display:flex><span>         <span style=color:#e6db74>:dependencies</span> [[alembic <span style=color:#e6db74>&#34;0.3.2&#34;</span>]
</span></span><span style=display:flex><span>                        [org.clojure/tools.nrepl <span style=color:#e6db74>&#34;0.2.12&#34;</span>]]}}</span></span></code></pre></div></div><ul><li>After creating your project with <code>lein new app &lt;projectname></code> or
importing an existing project, run <code>SPC m s i</code> in any of the clojure
source files to connect to the CIDER REPL.</li></ul></div></div><div id=outline-container-headline-11 class=outline-5><h5 id=headline-11>More details</h5><div id=outline-text-headline-11 class=outline-text-5><p>More info regarding installation of nREPL middleware can be found here:</p><ul><li>CIDER: <a href=https://github.com/clojure-emacs/cider#installation>cider_install</a></li><li>clj-refactor: <a href=https://github.com/clojure-emacs/refactor-nrepl>refactor-nrepl</a></li></ul></div></div></div></div></div></div><div id=outline-container-headline-12 class=outline-3><h3 id=headline-12>Usage</h3><div id=outline-text-headline-12 class=outline-text-3><div id=outline-container-headline-13 class=outline-4><h4 id=headline-13>Cheatsheet</h4><div id=outline-text-headline-13 class=outline-text-4><p>This layers installs the <a href=https://github.com/clojure-emacs/clojure-cheatsheet>clojure-cheathseet</a> package which embeds this useful
<a href=https://clojure.org/api/cheatsheet>cheatsheet</a> into Emacs.</p><p>Type <code>SPC m h c</code> to display the cheatsheet then type in some terms (space
separated) to narrow down the list. For example, try typing in sort map to see
some functions that deal with sorting maps.</p></div></div><div id=outline-container-headline-14 class=outline-4><h4 id=headline-14>Structuraly safe editing</h4><div id=outline-text-headline-14 class=outline-text-4><p>This layer adds support for <code class=verbatim>evil-cleverparens</code> which allows to safely edit
lisp code by keeping the s-expressions balanced.</p><p>By default this mode is not activated. You can turn it on locally on the active
buffer with <code>SPC m T s</code> (<code class=verbatim>s</code> for safe).</p><p>To turn it on automatically for all <code class=verbatim>clojure</code> buffers call the following
function in your <code class=verbatim>dotspacemacs/user-config</code> function:</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(spacemacs/toggle-evil-safe-lisp-structural-editing-on-register-hook-clojure-mode)</span></span></code></pre></div></div><p>or to enable it for all supported modes:</p><div class="src src-emacs-lisp"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(spacemacs/toggle-evil-safe-lisp-structural-editing-on-register-hooks)</span></span></code></pre></div></div><p>When enabled the symbol <code class=verbatim>üÜÇ</code> should be displayed in the mode-line.</p></div></div><div id=outline-container-headline-15 class=outline-4><h4 id=headline-15>Key Bindings</h4><div id=outline-text-headline-15 class=outline-text-4><div id=outline-container-headline-16 class=outline-5><h5 id=headline-16>Working with clojure files (barfage, slurpage & more)</h5><div id=outline-text-headline-16 class=outline-text-5><p>Spacemacs comes with a special <code class=verbatim>lisp-state</code> for working with lisp code that
supports slurpage, barfage and more tools you'll likely want when working with
lisp.</p><p>As this state works the same for all files, the documentation is in global
<a href=https://github.com/syl20bnr/spacemacs/blob/master/doc/DOCUMENTATION.org#lisp-key-bindings>DOCUMENTATION.org</a>. In general, use <code>SPC k</code> to interact with the lisp-state.</p></div></div></div></div></div></div><div id=outline-container-headline-17 class=outline-3><h3 id=headline-17>Leader</h3><div id=outline-text-headline-17 class=outline-text-3><div id=outline-container-headline-18 class=outline-4><h4 id=headline-18>Documentation</h4><div id=outline-text-headline-18 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m h a</code></td><td>cider apropos</td></tr><tr><td><code>SPC m h c</code></td><td>clojure cheatsheet</td></tr><tr><td><code>SPC m h g</code></td><td>cider grimoire</td></tr><tr><td><code>SPC m h h</code></td><td>cider doc</td></tr><tr><td><code>SPC m h j</code></td><td>cider javadoc</td></tr><tr><td><code>SPC m h n</code></td><td>cider browse ns</td></tr></tbody></table></div></div><div id=outline-container-headline-19 class=outline-4><h4 id=headline-19>Evaluation</h4><div id=outline-text-headline-19 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m e ;</code></td><td>eval sexp and show result as comment</td></tr><tr><td><code>SPC m e b</code></td><td>eval buffer</td></tr><tr><td><code>SPC m e e</code></td><td>eval last sexp</td></tr><tr><td><code>SPC m e f</code></td><td>eval function at point</td></tr><tr><td><code>SPC m e r</code></td><td>eval region</td></tr><tr><td><code>SPC m e m</code></td><td>cider macroexpand 1</td></tr><tr><td><code>SPC m e M</code></td><td>cider macroexpand all</td></tr><tr><td><code>SPC m e p</code></td><td>print last sexp (clojure interaction mode only)</td></tr><tr><td><code>SPC m e P</code></td><td>eval last sexp and pretty print result in separate buffer</td></tr><tr><td><code>SPC m e w</code></td><td>eval last sexp and replace with result</td></tr></tbody></table></div></div><div id=outline-container-headline-20 class=outline-4><h4 id=headline-20>Goto</h4><div id=outline-text-headline-20 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m g b</code></td><td>go back</td></tr><tr><td><code>SPC m g C</code></td><td>browse classpath</td></tr><tr><td><code>SPC m g g</code></td><td>goto var</td></tr><tr><td><code>SPC m g e</code></td><td>goto error</td></tr><tr><td><code>SPC m g r</code></td><td>goto resource</td></tr><tr><td><code>SPC m g n</code></td><td>browse namespaces</td></tr><tr><td><code>SPC m g N</code></td><td>browse all namespaces</td></tr></tbody></table></div></div><div id=outline-container-headline-21 class=outline-4><h4 id=headline-21>REPL</h4><div id=outline-text-headline-21 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m ,</code></td><td>handle shortcut (cider-repl-handle-shortcut)</td></tr><tr><td><code>SPC m s b</code></td><td>send and eval buffer in REPL</td></tr><tr><td><code>SPC m s B</code></td><td>send and eval buffer and switch to REPL in <code class=verbatim>insert state</code></td></tr><tr><td><code>SPC m s c</code></td><td>connect to REPL (cider-connect) or clear repl buffer (cider-repl-clear-buffer)</td></tr><tr><td><code>SPC m s C</code></td><td>clear REPL (cider-find-and-clear-repl-output)</td></tr><tr><td><code>SPC m s e</code></td><td>send and eval last sexp in REPL</td></tr><tr><td><code>SPC m s E</code></td><td>send and eval last sexp and switch to REPL in <code class=verbatim>insert state</code></td></tr><tr><td><code>SPC m s f</code></td><td>send and eval function in REPL</td></tr><tr><td><code>SPC m s F</code></td><td>send and eval function and switch to REPL in <code class=verbatim>insert state</code></td></tr><tr><td><code>SPC m s i</code></td><td>start REPL (cider-jack-in)</td></tr><tr><td><code>SPC m s I</code></td><td>start clojurescript REPL (cider-jack-in-clojurescript)</td></tr><tr><td><code>SPC m s n</code></td><td>send and eval ns form in REPL</td></tr><tr><td><code>SPC m s N</code></td><td>send and eval ns form and switch to REPL in <code class=verbatim>insert state</code></td></tr><tr><td><code>SPC m s q</code></td><td>kill REPL (cider-quit)</td></tr><tr><td><code>SPC m s o</code></td><td>switch to other repl instance (cider-repl-switch-to-other)</td></tr><tr><td><code>SPC m s r</code></td><td>send and eval region in REPL</td></tr><tr><td><code>SPC m s R</code></td><td>send and eval region and switch to REPL in <code class=verbatim>insert state</code></td></tr><tr><td><code>SPC m s s</code></td><td>switch to REPL or jump to last file or last clj buffer from repl (cider-repl)</td></tr><tr><td><code>SPC m s x</code></td><td>refresh REPL</td></tr><tr><td><code>SPC m s X</code></td><td>restart REPL</td></tr></tbody></table></div></div><div id=outline-container-headline-22 class=outline-4><h4 id=headline-22>Tests</h4><div id=outline-text-headline-22 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m t a</code></td><td>run all tests in namespace</td></tr><tr><td><code>SPC m t r</code></td><td>re-run test failures for namespace</td></tr><tr><td><code>SPC m t t</code></td><td>run test at point</td></tr></tbody></table></div></div><div id=outline-container-headline-23 class=outline-4><h4 id=headline-23>Toggles</h4><div id=outline-text-headline-23 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m T e</code></td><td>toggle englighten mode</td></tr><tr><td><code>SPC m T f</code></td><td>toggle REPL font-locking</td></tr><tr><td><code>SPC m T e</code></td><td>toggle cider-enlighten-mode</td></tr><tr><td><code>SPC m T p</code></td><td>toggle REPL pretty-printing</td></tr><tr><td><code>SPC m T i</code></td><td>toggle indentation style</td></tr><tr><td><code>SPC m T t</code></td><td>toggle auto test mode</td></tr></tbody></table></div></div><div id=outline-container-headline-24 class=outline-4><h4 id=headline-24>Debugging</h4><div id=outline-text-headline-24 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m d b</code></td><td>instrument expression at point</td></tr><tr><td><code>SPC m d e</code></td><td>display last stacktrace</td></tr><tr><td><code>SPC m d r</code></td><td>reload namespaces</td></tr><tr><td><code>SPC m d v</code></td><td>inspect expression at point</td></tr><tr><td><code>SPC m d i</code></td><td>inspect expression at point</td></tr><tr><td><code>SPC m d f</code></td><td>query form at point</td></tr><tr><td><code>SPC m d w</code></td><td>open sayid workspace window</td></tr><tr><td><code>SPC m d E</code></td><td>one time display of value at cursor</td></tr><tr><td><code>SPC m d !</code></td><td>reload traces and clear sayid workspace</td></tr><tr><td><code>SPC m d c</code></td><td>clear workspace trace log</td></tr><tr><td><code>SPC m d x</code></td><td>clear workspace traces and log</td></tr><tr><td><code>SPC m d s</code></td><td>show what is currently traced</td></tr><tr><td><code>SPC m d S</code></td><td>show what is currently traced in current namespace</td></tr><tr><td><code>SPC m d V</code></td><td>set the view</td></tr><tr><td><code>SPC m d h</code></td><td>show sayid help (keybindings may not be accurate)</td></tr><tr><td><code>SPC m d t y</code></td><td>recursively trace every namespace in given dir</td></tr><tr><td><code>SPC m d t p</code></td><td>trace namespaces by regex</td></tr><tr><td><code>SPC m d t b</code></td><td>trace current file's namespace</td></tr><tr><td><code>SPC m d t e</code></td><td>enable existing trace on current function</td></tr><tr><td><code>SPC m d t E</code></td><td>enable existing trace on all functions</td></tr><tr><td><code>SPC m d t d</code></td><td>disable existing trace on current function</td></tr><tr><td><code>SPC m d t D</code></td><td>disable existing trace on all functions</td></tr><tr><td><code>SPC m d t n</code></td><td>create inner trace on function</td></tr><tr><td><code>SPC m d t o</code></td><td>create outer trace on function</td></tr><tr><td><code>SPC m d t r</code></td><td>remove trace on function</td></tr><tr><td><code>SPC m d t K</code></td><td>remove all traces</td></tr></tbody></table></div></div><div id=outline-container-headline-25 class=outline-4><h4 id=headline-25>Refactoring</h4><div id=outline-text-headline-25 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m r ?</code></td><td>describe refactoring</td></tr><tr><td><code>SPC m r a d</code></td><td>add declaration</td></tr><tr><td><code>SPC m r a i</code></td><td>add import to ns</td></tr><tr><td><code>SPC m r a m</code></td><td>add missing libspec</td></tr><tr><td><code>SPC m r a p</code></td><td>add project dependency</td></tr><tr><td><code>SPC m r a r</code></td><td>add require to ns</td></tr><tr><td><code>SPC m r a u</code></td><td>add use to ns</td></tr><tr><td><code>SPC m r c (</code></td><td>convert coll to list</td></tr><tr><td><code>SPC m r c '</code></td><td>convert coll to quoted list</td></tr><tr><td><code>SPC m r c {</code></td><td>convert coll to map</td></tr><tr><td><code>SPC m r c #</code></td><td>convert coll to set</td></tr><tr><td><code>SPC m r c [</code></td><td>convert coll to vector</td></tr><tr><td><code>SPC m r c :</code></td><td>toggle between keyword and string</td></tr><tr><td><code>SPC m r c i</code></td><td>cycle if</td></tr><tr><td><code>SPC m r c n</code></td><td>clean ns</td></tr><tr><td><code>SPC m r c p</code></td><td>cycle privacy</td></tr><tr><td><code>SPC m r d k</code></td><td>destructure keys</td></tr><tr><td><code>SPC m r e c</code></td><td>extract constant</td></tr><tr><td><code>SPC m r e d</code></td><td>extract definition</td></tr><tr><td><code>SPC m r e f</code></td><td>extract function</td></tr><tr><td><code>SPC m r e l</code></td><td>expand let</td></tr><tr><td><code>SPC m r f u</code></td><td>find usages</td></tr><tr><td><code>SPC m r f e</code></td><td>create fn from example</td></tr><tr><td><code>SPC m r h d</code></td><td>hotload dependency</td></tr><tr><td><code>SPC m r i l</code></td><td>introduce let</td></tr><tr><td><code>SPC m r i s</code></td><td>inline symbol</td></tr><tr><td><code>SPC m r m f</code></td><td>move form</td></tr><tr><td><code>SPC m r m l</code></td><td>move to let</td></tr><tr><td><code>SPC m r p c</code></td><td>project clean</td></tr><tr><td><code>SPC m r p f</code></td><td>promote function</td></tr><tr><td><code>SPC m r r d</code></td><td>remove debug fns</td></tr><tr><td><code>SPC m r r f</code></td><td>rename file</td></tr><tr><td><code>SPC m r r l</code></td><td>remove let</td></tr><tr><td><code>SPC m r r r</code></td><td>remove unused requires</td></tr><tr><td><code>SPC m r r s</code></td><td>rename symbol</td></tr><tr><td><code>SPC m r r u</code></td><td>replace use</td></tr><tr><td><code>SPC m r s n</code></td><td>sort ns</td></tr><tr><td><code>SPC m r s p</code></td><td>sort project dependencies</td></tr><tr><td><code>SPC m r s r</code></td><td>stop referring</td></tr><tr><td><code>SPC m r s c</code></td><td>show changelog</td></tr><tr><td><code>SPC m r t f</code></td><td>thread first all</td></tr><tr><td><code>SPC m r t h</code></td><td>thread</td></tr><tr><td><code>SPC m r t l</code></td><td>thread last all</td></tr><tr><td><code>SPC m r u a</code></td><td>unwind all</td></tr><tr><td><code>SPC m r u p</code></td><td>update project dependencies</td></tr><tr><td><code>SPC m r u w</code></td><td>unwind</td></tr></tbody></table></div></div><div id=outline-container-headline-26 class=outline-4><h4 id=headline-26>Reformatting</h4><div id=outline-text-headline-26 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>SPC m f l</code></td><td>realign current form</td></tr><tr><td><code>SPC m f b</code> or <code>SPC m =</code></td><td>reformat current buffer</td></tr></tbody></table></div></div></div></div><div id=outline-container-headline-27 class=outline-3><h3 id=headline-27>CIDER Buffers</h3><div id=outline-text-headline-27 class=outline-text-3><p>In general, <code>q</code> should always quit the popped up buffer.</p><div id=outline-container-headline-28 class=outline-4><h4 id=headline-28>stacktrace-mode</h4><div id=outline-text-headline-28 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>C-j</code></td><td>next cause</td></tr><tr><td><code>C-k</code></td><td>previous cause</td></tr><tr><td><code>TAB</code></td><td>cycle current cause</td></tr><tr><td><code>0</code></td><td>cycle all causes</td></tr><tr><td><code>1</code></td><td>cycle cause 1</td></tr><tr><td><code>2</code></td><td>cycle cause 2</td></tr><tr><td><code>3</code></td><td>cycle cause 3</td></tr><tr><td><code>4</code></td><td>cycle cause 4</td></tr><tr><td><code>5</code></td><td>cycle cause 5</td></tr><tr><td><code>a</code></td><td>toggle all</td></tr><tr><td><code>c</code></td><td>toggle clj</td></tr><tr><td><code>d</code></td><td>toggle duplicates</td></tr><tr><td><code>J</code></td><td>toggle java</td></tr><tr><td><code>r</code></td><td>toggle repl</td></tr><tr><td><code>T</code></td><td>toggle tooling</td></tr></tbody></table></div></div><div id=outline-container-headline-29 class=outline-4><h4 id=headline-29>inspector-mode</h4><div id=outline-text-headline-29 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>TAB</code></td><td>next inspectable object</td></tr><tr><td><code>Shift-TAB</code></td><td>previous inspectable object</td></tr><tr><td><code>RET</code></td><td>inspect object</td></tr><tr><td><code>L</code></td><td>pop to the parent object</td></tr><tr><td><code>n</code></td><td>next page in paginated view</td></tr><tr><td><code>N</code></td><td>previous page in paginated view</td></tr><tr><td><code>r</code></td><td>refresh</td></tr><tr><td><code>s</code></td><td>set a new page size</td></tr></tbody></table></div></div><div id=outline-container-headline-30 class=outline-4><h4 id=headline-30>test-report-mode</h4><div id=outline-text-headline-30 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>C-j</code></td><td>next result</td></tr><tr><td><code>C-k</code></td><td>previous result</td></tr><tr><td><code>RET</code></td><td>jump to test</td></tr><tr><td><code>d</code></td><td>ediff test result</td></tr><tr><td><code>e</code></td><td>show stacktrace</td></tr><tr><td><code>r</code></td><td>rerun failed tests</td></tr><tr><td><code>t</code></td><td>run test</td></tr><tr><td><code>T</code></td><td>run tests</td></tr></tbody></table></div></div></div></div><div id=outline-container-headline-31 class=outline-3><h3 id=headline-31>Sayid Buffers</h3><div id=outline-text-headline-31 class=outline-text-3><div id=outline-container-headline-32 class=outline-4><h4 id=headline-32>sayid-mode</h4><div id=outline-text-headline-32 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>enter</code></td><td>pop to function</td></tr><tr><td><code>d</code></td><td>def value to $s/*</td></tr><tr><td><code>f</code></td><td>query for calls to function</td></tr><tr><td><code>F</code></td><td>query to calls to function with modifier</td></tr><tr><td><code>i</code></td><td>show only this instance</td></tr><tr><td><code>I</code></td><td>show only this instance with modifier</td></tr><tr><td><code>w</code></td><td>show full workspace trace</td></tr><tr><td><code>n</code></td><td>jump to next call</td></tr><tr><td><code>N</code></td><td>jump to previous call</td></tr><tr><td><code>P</code></td><td>pretty print value</td></tr><tr><td><code>C</code></td><td>clear workspace trace log</td></tr><tr><td><code>L</code> or <code>Backspace</code></td><td>previous buffer state</td></tr><tr><td><code>Shift-Backspace</code></td><td>forward buffer state</td></tr><tr><td><code>e</code></td><td>generate instance expression and put in kill ring</td></tr><tr><td><code>H</code></td><td>display help (keybindings may not be accurate)</td></tr><tr><td><code>C-s v</code></td><td>toggle view</td></tr><tr><td><code>C-s V</code></td><td>set view</td></tr></tbody></table></div></div><div id=outline-container-headline-33 class=outline-4><h4 id=headline-33>sayid-traced-mode</h4><div id=outline-text-headline-33 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>enter</code></td><td>drill into ns at point</td></tr><tr><td><code>e</code></td><td>enable trace</td></tr><tr><td><code>d</code></td><td>disable trace</td></tr><tr><td><code>E</code></td><td>enable all traces</td></tr><tr><td><code>D</code></td><td>disable all traces</td></tr><tr><td><code>i</code></td><td>apply inner trace to function at point</td></tr><tr><td><code>o</code></td><td>apply outer trace to function at point</td></tr><tr><td><code>r</code></td><td>remove trace at point</td></tr><tr><td><code>backspace</code></td><td>go back to trace overview</td></tr><tr><td><code>h</code></td><td>display help (keybindings may not be accurate)</td></tr></tbody></table></div></div><div id=outline-container-headline-34 class=outline-4><h4 id=headline-34>sayid-pprint</h4><div id=outline-text-headline-34 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>enter</code></td><td>show path in minibuffer</td></tr><tr><td><code>i</code></td><td>enter child node</td></tr><tr><td><code>o</code></td><td>enter parent node</td></tr><tr><td><code>n</code></td><td>enter next sibling node</td></tr><tr><td><code>p</code></td><td>enter previous sibling node</td></tr></tbody></table></div></div><div id=outline-container-headline-35 class=outline-4><h4 id=headline-35>cider-repl-mode</h4><div id=outline-text-headline-35 class=outline-text-4><table><thead><tr><th>Key Binding</th><th>Description</th></tr></thead><tbody><tr><td><code>C-j</code></td><td>next input</td></tr><tr><td><code>C-k</code></td><td>previous input</td></tr></tbody></table></div></div></div></div><div id=outline-container-headline-36 class=outline-3><h3 id=headline-36>Development Notes</h3><div id=outline-text-headline-36 class=outline-text-3><div id=outline-container-headline-37 class=outline-4><h4 id=headline-37>Indentation</h4><div id=outline-text-headline-37 class=outline-text-4><p>With a <a href=https://github.com/clojure-emacs/cider/blob/master/doc/indent_spec.md>new</a> functionality of Cider to read the custom indentation rules from the
var's metadata, it is better for consistency reasons to not add the custom
indentation rules to Spacemacs, but to add them to the metadata of those
specific vars.</p></div></div></div></div></div></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/emacs/using-chrome-in-emacs/><span class=button__icon>‚Üê</span>
<span class=button__text>using-chrome-in-emacs.org</span></a></span>
<span class="button next"><a href=/posts/emacs/using-dotemacs-in-emacs/><span class=button__text>using-dotemacs-in-emacs.org</span>
<span class=button__icon>‚Üí</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>@linuxing3</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
<script src=/assets/languageSelector.js></script></div></body></html>